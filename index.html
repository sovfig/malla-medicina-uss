
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Malla Curricular Medicina USS</title>
  <link rel="stylesheet" href="estilos.css">
</head>
<body>
  <h1>Malla Curricular Medicina - USS</h1>
  <div style="margin-bottom:20px;">
    <strong>Haz clic sobre un ramo para cambiar su estado:</strong><br>
    ðŸ”´ Pendiente â†’ ðŸŸ¡ Cursando â†’ ðŸŸ¢ Aprobado
  </div>
  <div id="malla"></div>

  <script>
    fetch("malla.json")
      .then(res => res.json())
      .then(data => {
        const contenedor = document.getElementById("malla");
        const progresoGuardado = JSON.parse(localStorage.getItem("progreso")) || {};

        data.forEach(semestre => {
          const bloque = document.createElement("div");
          bloque.classList.add("semestre");
          bloque.innerHTML = `<h2>Semestre ${semestre.semestre}</h2>`;

          semestre.ramos.forEach(ramo => {
            const item = document.createElement("p");
            item.textContent = ramo.nombre;
            const estadoActual = progresoGuardado[ramo.nombre] || ramo.estado;
            item.classList.add(estadoActual);

            item.addEventListener("click", () => {
              const estados = ["pendiente", "cursando", "aprobado"];
              const actualIndex = estados.indexOf(item.classList[0]);
              const siguienteEstado = estados[(actualIndex + 1) % estados.length];
              item.className = "";
              item.classList.add(siguienteEstado);
              progresoGuardado[ramo.nombre] = siguienteEstado;
              localStorage.setItem("progreso", JSON.stringify(progresoGuardado));
            });

            bloque.appendChild(item);
          });

          contenedor.appendChild(bloque);
        });
      });
  </script>
</body>
</html>
